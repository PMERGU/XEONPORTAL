<div>
    <div small-header>
        <div class="hpanel" style="margin-bottom: 15px;">
            <div class="panel-body">
                <h2 class="font-light m-b-xs">
                    Order #{{orderGroup[0].dbeln}} Details
                </h2>
                <jh-alert></jh-alert>
                <small>Detailed order view as it proceeds from capture to completed</small>
            </div>
        </div>
    </div>
    <div class="hpanel">
        <div class="panel-body">

            <div id="timeline-wrap">
                <div id="timeline"></div>

                <!-- This is the individual marker-->
                <div class="marker mReceived timeline-icon" ng-class="{'done': states['RECEIVED']}">
                    <i class="icon-pi-cargo-box-3"></i>
                    <i class="checkmark fa fa-check" ng-show="states['RECEIVED']"></i>
                    <span style="margin-left: -105%;">Received</span>
                </div>
                <!-- / marker -->

                <!-- This is the individual marker-->
                <div class="marker mProcessed timeline-icon" ng-class="{'done': states['PROCESSED']}">
                    <i class="icon-pi-cargo-box-6"></i>
                    <i class="checkmark fa fa-check" ng-show="states['PROCESSED']"></i>
                    <span style="margin-left: -110%;">Processed</span>
                </div>
                <!-- / marker -->

                <!-- This is the individual marker-->
                <div class="marker mCollected timeline-icon" ng-class="{'done': states['COLLECTED']}">
                    <i class="icon-pi-cargo-trolley-1"></i>
                    <i class="checkmark fa fa-check" ng-show="states['COLLECTED']"></i>
                    </span>
                    <span style="margin-left: -110%;">Collected</span>
                </div>
                <!-- / marker -->

                <!-- This is the individual marker-->
                <div class="marker mTransit timeline-icon" ng-class="{'done': states['IN_TRANSIT']}">
                    <i class="icon-pi-truck-3"></i>
                    <i class="checkmark fa fa-check" ng-show="states['IN_TRANSIT']"></i>
                    <span style="margin-left: -110%; width: 74px;">In Transit</span>
                </div>
                <!-- / marker -->

                <!-- This is the individual marker-->
                <div class="marker mDelivered timeline-icon" ng-class="{'done': states['DELIVERED']}">
                    <i class="icon-pi-hand-truck-4"></i>
                    <i class="checkmark fa fa-check" ng-show="states['DELIVERED']"></i>
                    <span style="margin-left: -110%;">Delivered</span>
                </div>
                <!-- / marker -->

                <!-- This is the individual marker-->
                <div class="marker mPod timeline-icon" ng-class="{'done': states['POD']}">
                    <i class="icon-pi-checklist-3"></i>
                    <i class="checkmark fa fa-check" ng-show="states['POD_LOADED']"></i>
                    <span style="margin-left: -70%;">POD</span>
                </div>
                <!-- / marker -->

                <!-- This is the individual marker-->
                <div class="marker mInvoice timeline-icon" ng-class="{'done': states['INVOICE']}">
                    <i class="icon-pi-payment-2"></i>
                    <i class="checkmark fa fa-check" ng-show="states['INVOICE_LOADED']"></i>
                    <span style="margin-left: -70%;">Invoice</span>
                </div>
                <!-- / marker -->
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12">
            <div class="hpanel">
                <div class="panel-body list">
                    <uib-tabset>
                        <uib-tab>
                            <uib-tab-heading>
                                Order Details&nbsp;
                            </uib-tab-heading>

                            <div class="table-responsive project-list">
                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th>Step</th>
                                        <th>Description</th>
                                        <th>Date</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-hide="purchaseOrder.state === 'NOT_FOUND'">
                                        <td>1</td>
                                        <td>Order captured on portal
                                            <br/>
                                            <small>&nbsp; <i class="fa fa-user"></i> captured by
                                                {{purchaseOrder.user.firstName}} {{purchaseOrder.user.lastName}}
                                            </small>
                                        </td>
                                        <td>{{purchaseOrder.captureDate | date: 'yyyy-MM-dd hh:mm'}}</td>
                                    </tr>
                                    <tr ng-show="purchaseOrder.state === 'PROCESSING'">
                                        <td>2</td>
                                        <td>Order is being processed by Xeon Team
                                            <br/>
                                            <small>&nbsp; <i class="fa fa-bullseye"></i> assigned to
                                                {{purchaseOrder.xeonUser.firstName}} {{purchaseOrder.xeonUser.lastName}}
                                            </small>
                                        </td>
                                        <td>{{purchaseOrder.updatedDate | date: 'yyyy-MM-dd hh:mm'}}</td>
                                    </tr>
                                    <tr ng-show="states['PROCESSED']">
                                        <td>2</td>
                                        <td>Order has been processed by our team
                                            <br/>
                                            <small ng-show="purchaseOrder.xeonUser">&nbsp; <i class="fa fa-user"></i>
                                                processed by {{purchaseOrder.xeonUser.firstName}}
                                                {{purchaseOrder.xeonUser.lastName}}
                                            </small>
                                        </td>
                                        <td>{{purchaseOrder.updatedDate | date: 'yyyy-MM-dd hh:mm'}}</td>
                                    </tr>
                                    <tr ng-show="states['COLLECTED']">
                                        <td>3</td>
                                        <td>Order has been collected and is in transit
                                        </td>
                                        <td>{{orderGroup[0].daten | date: 'yyyy-MM-dd'}} {{orderGroup[0].uaten | date:
                                            'hh:mm'}}
                                        </td>
                                    </tr>
                                    <tr ng-show="states['DELIVERED']">
                                        <td>4</td>
                                        <td>Order has been delivered
                                        </td>
                                        <td>{{orderGroup[0].audat | date: 'yyyy-MM-dd'}} {{orderGroup[0].audat | date:
                                            'hh:mm'}}
                                        </td>
                                    </tr>
                                    <tr ng-show="states['POD']">
                                        <td>5</td>
                                        <td>POD uploaded and available online
                                        </td>
                                        <td>{{orderGroup[0].audat | date: 'yyyy-MM-dd'}} {{podDate | date: 'hh:mm'}}
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>

                            </div>
                        </uib-tab>
                        <uib-tab>
                            <uib-tab-heading>
                                Attachments&nbsp;
                            </uib-tab-heading>
                            <div class="table-responsive">
                                <table class="table table-striped table-condensed table-hover table-centered" >
                                    <thead>
                                    <tr>
                                        <th width="60px">Id</th>
                                        <th width="140px">Category</th>
                                        <th width="140px">Date Added</th>
                                        <th width="160px">Uploaded by</th>
                                        <th width="100px">Image Type</th>
                                        <th>Note</th>
                                        <th width="160px">
                                            <button type="submit" class="btn btn-primary" style="width: 150px;" ui-sref="orderdetail.attachment({for: orderGroup[0].dbeln})">
                                                <span class="glyphicon glyphicon-plus"></span>
                                                <span>Add attachment</span>
                                            </button>
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="attachment in attachments | orderBy:createdDate">
                                        <td>{{attachment.id}}</td>
                                        <td>{{attachment.category}}</td>
                                        <td>{{attachment.createdDate | date: 'yyyy-MM-dd'}}</td>
                                        <td>{{attachment.user.firstName + ' ' + attachment.user.lastName}}</td>
                                        <td>{{attachment.mimeType}}</td>
                                        <td>{{attachment.description}}</td>
                                        <td class="text-right">
                                            <div class="btn-group flex-btn-group-container">
                                                <!--<button type="submit"-->
                                                        <!--ui-sref="orderdetail"-->
                                                        <!--class="btn btn-info">-->
                                                    <!--<span class="glyphicon glyphicon-eye-open"></span>-->
                                                    <!--<span class="hidden-xs hidden-sm"></span>-->
                                                <!--</button>-->
                                                <button type="button" ng-click="downloadAttachment(attachment)" ng-disabled="isDownloadingAttachment" class="btn btn-primary btn-lg" style="height: 33px;padding-top: 5px;width: 70px;">
                                                    <span class="glyphicon glyphicon-download" ng-show="selectedAttachment.id != attachment.id || !isDownloadingAttachment"></span>
                                                    <span class="glyphicon glyphicon-refresh glyphicon-spin" ng-show="selectedAttachment.id == attachment.id && isDownloadingAttachment"></span>
                                                    <span class="hidden-xs hidden-sm"></span>
                                                </button>
                                                <button type="button"
                                                        ui-sref="orderdetail.attachmentDelete({attachment: attachment})"
                                                        class="btn btn-danger">
                                                    <span class="glyphicon glyphicon-remove-circle"></span>
                                                    <span class="hidden-xs hidden-sm"></span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </uib-tab>
                        <uib-tab>
                            <uib-tab-heading>
                                Comments
                            </uib-tab-heading>
                            <uib-alert type="info" close="closeAlert($index)" ng-show="purchaseOrder.comment">
                                <strong>Comment: </strong>{{ purchaseOrder.comment }}
                            </uib-alert>
                            <div class="alert alert-success" ng-show="!purchaseOrder.comment">
                                <i class="fa fa-hashtag"></i> &nbsp; no comments have been added to this order as yet.
                            </div>
                        </uib-tab>
                    </uib-tabset>
                </div>
            </div>
        </div>
    </div>
</div>
